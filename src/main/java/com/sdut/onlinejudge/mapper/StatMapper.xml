<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sdut.onlinejudge.mapper.StatMapper">

    <select id="getStat" resultType="statKit">
        select * from(
            (select count(*) as userNum from user) a,
            (select count(*) as contestNum from contests) b,
            (select count(*) as singleSelectNum from single_selects) c,
            (select count(*) as judgeProblemNum from judge_problems) d,
            (select count(*) as multiSelectNum from multi_selects) e,
            (select count(*) as submitNum from submits) f
        )
    </select>

    <select id="getStatByCid" resultType="submitStat">
        select cid, username, name, gender, college, t1.score, submitTime
        from (select cid, uid, score, submitTime from submits where cid=#{cid}) t1
        inner join userinfo on t1.uid=userinfo.username
        ORDER BY t1.score DESC
    </select>

    <select id="getFeedBacks" resultType="feedBack">
        select * from feedback
    </select>

    <select id="getSingleHint" resultType="map">
        SELECT hint, COUNT(hint) cnt FROM single_selects
        GROUP BY hint ORDER BY cnt DESC
    </select>

    <select id="getMultiHint" resultType="map">
        SELECT hint, COUNT(hint) cnt FROM multi_selects
        GROUP BY hint ORDER BY cnt DESC
    </select>
</mapper>
